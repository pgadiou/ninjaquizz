<div class="wrapper-quiz-details">
  <div class="quiz-details-container">
    <%= simple_form_for @quiz do |f| %>
     <div class="container">
        <div class="row"></div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <div class="quiz-detail-title">
                Quiz name
              </div>
              <div class="quiz-detail">
                <%= f.input :name, placeholder: @quiz.name, label: false %>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <div class="quiz-detail-title">
                Pin number
              </div>
              <div class="quiz-detail">
                <%= f.input :pin_number, placeholder: @quiz.pin_number, disabled: true, label: false %>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <div class="quiz-detail-title">
                Language
              </div>
              <div class="quiz-detail">
                <%= f.input :language, as: :radio_buttons, collection: [['french', 'French'], ['english', 'English']], label_method: :second, value_method: :first, label: false %>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <div class="quiz-detail-title">
                Timer
              </div>
              <div class="quiz-detail">
                <%= f.input :timer, as: :radio_buttons, collection: [[true, 'Yes'], [false, 'No']], label_method: :second, value_method: :first, label: false %>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <div class="quiz-detail-title">
                Time bonus
              </div>
              <div class="quiz-detail">
                <%= f.input :time_bonus, as: :radio_buttons, collection: [[true, 'Yes'], [false, 'No']], label_method: :second, value_method: :first, label: false %>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-3">
            <div class="quiz-detail-container">
              <%= f.submit' Save quiz parameters', class: 'quiz-detail-save' %>
<!--                 <div class="quiz-detail-title">
                </div> -->
              <div class="quiz-detail">
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
<div class="wrapper-rounds-edit">
  <div class="container-rounds-edit">
    <% @quiz.rounds.each do |round| %>
      <div id="round<%=round.id%>">
        <%= render 'quizzes/edit_partials/round_details_edit', round: round %>
      </div>
      <div class="container-round-edit-questions collapse" id="round-questions<%=round.id%>">
        <% round.quiz_questions.each do |quiz_question| %>
          <%question = Question.find(quiz_question.question_id)%>
          <div id="question<%=question.id%>">
            <%= render 'quizzes/edit_partials/question_details_edit', question: question %>
          </div>
          <div class="container-round-edit-question-answers collapse" id="question-answers<%=question.id%>">
            <% question.answers.each do |answer| %>
              <div id="answer<%=answer.id%>">
                <%= render 'quizzes/edit_partials/answer_details_edit', answer: answer %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<% content_for :after_js do %>
  <script>

    const showRoundEditForm = () => {
      const rounds = document.getElementsByClassName('round-selector');
      const roundEditButtons = document.getElementsByClassName('round-edit-details-edit-button')
      const showRoundForm = () => {
        console.log(event.currentTarget.parentElement);
        console.log(event.currentTarget.parentElement.nextElementSibling);
        var roundEditForm = event.currentTarget.parentElement.nextElementSibling;
        var roundPresentationDiv = event.currentTarget.parentElement;
        roundEditForm.classList.remove("hidden");
        roundPresentationDiv.classList.add("hidden");
      }
      for (var i = 0; i< roundEditButtons.length; i++) {
        roundEditButtons[i].addEventListener("click", showRoundForm);
      }
    }

    const cancelRoundEdit = () => {
      const cancelRoundEditButtons = document.getElementsByClassName('round-edit-details-form-cancel');
      const hideRoundForm = () => {
        console.log(event.currentTarget.parentElement.parentElement.parentElement);
        console.log(event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling);
        var roundEditForm = event.currentTarget.parentElement.parentElement.parentElement;
        var roundPresentationDiv = event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling;
        roundEditForm.classList.add("hidden");
        roundPresentationDiv.classList.remove("hidden");
      }

      for (var i = 0; i< cancelRoundEditButtons.length; i++) {
        cancelRoundEditButtons[i].addEventListener("click", hideRoundForm);
      }
    }

    const showQuestionEditForm = () => {
      const questions = document.getElementsByClassName('question-selector');
      const questionEditButtons = document.getElementsByClassName('round-edit-question-details-edit-button')
      const showQuestionForm = () => {
        console.log(event.currentTarget.parentElement);
        console.log(event.currentTarget.parentElement.nextElementSibling);
        var questionEditForm = event.currentTarget.parentElement.nextElementSibling;
        var questionPresentationDiv = event.currentTarget.parentElement;
        questionEditForm.classList.remove("hidden");
        questionPresentationDiv.classList.add("hidden");
      }
      for (var i = 0; i< questionEditButtons.length; i++) {
        questionEditButtons[i].addEventListener("click", showQuestionForm);
      }
    }

    const cancelQuestionEdit = () => {
      const cancelQuestionEditButtons = document.getElementsByClassName('round-edit-question-details-form-cancel');
      const hideQuestionForm = () => {
        console.log(event.currentTarget.parentElement.parentElement.parentElement);
        console.log(event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling);
        var questionEditForm = event.currentTarget.parentElement.parentElement.parentElement;
        var questionPresentationDiv = event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling;
        questionEditForm.classList.add("hidden");
        questionPresentationDiv.classList.remove("hidden");
      }

      for (var i = 0; i< cancelQuestionEditButtons.length; i++) {
        cancelQuestionEditButtons[i].addEventListener("click", hideQuestionForm);
      }
    }

    const showAnswerEditForm = () => {
      const answers = document.getElementsByClassName('answer-selector');
      const answerEditButtons = document.getElementsByClassName('round-edit-question-answer-details-edit-button')
      const showAnswerForm = () => {
        console.log(event.currentTarget.parentElement);
        console.log(event.currentTarget.parentElement.nextElementSibling);
        var answerEditForm = event.currentTarget.parentElement.nextElementSibling;
        var answerPresentationDiv = event.currentTarget.parentElement;
        answerEditForm.classList.remove("hidden");
        answerPresentationDiv.classList.add("hidden");
      }
      for (var i = 0; i< answerEditButtons.length; i++) {
        answerEditButtons[i].addEventListener("click", showAnswerForm);
      }
    }

    const cancelAnswerEdit = () => {
      const cancelAnswerEditButtons = document.getElementsByClassName('round-edit-question-answer-details-form-cancel');
      const hideAnswerForm = () => {
        console.log(event.currentTarget.parentElement.parentElement.parentElement);
        console.log(event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling);
        var questionEditForm = event.currentTarget.parentElement.parentElement.parentElement;
        var questionPresentationDiv = event.currentTarget.parentElement.parentElement.parentElement.previousElementSibling;
        questionEditForm.classList.add("hidden");
        questionPresentationDiv.classList.remove("hidden");
      }

      for (var i = 0; i< cancelAnswerEditButtons.length; i++) {
        cancelAnswerEditButtons[i].addEventListener("click", hideAnswerForm);
      }
    }

    showRoundEditForm();

    cancelRoundEdit();

    showQuestionEditForm();

    cancelQuestionEdit();

    showAnswerEditForm();

    cancelAnswerEdit();

  </script>
<% end %>

